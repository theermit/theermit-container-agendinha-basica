(function(){"use strict";var t={3482:function(t,a,e){var o=e(6369),r=function(){var t=this,a=t._self._c;return a("div",{attrs:{id:"app"}},[a("section",{staticClass:"section"},[a("div",{staticClass:"container"},[a("h1",{staticClass:"title"},[t._v("Agenda Telefônica")]),a("router-view")],1)])])},n=[],i=e(1001),s={},c=(0,i.Z)(s,r,n,!1,null,null,null),l=c.exports,u=e(2631),m=e(3822);o.ZP.use(m.ZP);var d=new m.ZP.Store({state:{contato:null},getters:{getContato(t){return t.contato}},mutations:{SET_CONTATO(t,a){t.contato=a}},actions:{},modules:{}}),_=function(){var t=this,a=t._self._c;return a("div",[a("h2",{staticClass:"subtitle"},[t._v("Login")]),a("form",[a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"email"}},[t._v("Email")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"text",id:"email",maxlength:"255"},domProps:{value:t.email},on:{click:function(a){return t.limpar_correcao_email()},blur:function(a){return t.verifica_email()},input:function(a){a.target.composing||(t.email=a.target.value)}}})]),a("div",{staticStyle:{color:"red"}},[t._v(t._s(t.correcao_email))])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"senha"}},[t._v("Senha")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.senha,expression:"senha"}],attrs:{type:"password",id:"senha",maxlength:"8"},domProps:{value:t.senha},on:{blur:function(a){return t.verifica_senha()},click:function(a){return t.limpar_correcao_senha()},input:function(a){a.target.composing||(t.senha=a.target.value)}}})])]),a("div",{staticClass:"field"},[a("input",{staticClass:"button is-warning",attrs:{type:"reset",value:"Limpar"}}),t._v("   "),a("input",{staticClass:"button is-warning",attrs:{type:"button",value:"Enviar"},on:{click:function(a){return t.enviar()}}})]),a("router-link",{attrs:{to:"/cadastro"}},[t._v("Não possui login? Cadastre-se.")])],1)])},h=[],f=(e(560),e(1076));const p=f.Z.create({baseURL:"http://localhost:80"});p.interceptors.request.use((t=>{if(void 0!=window.localStorage.logado&&"true"==window.localStorage.logado.toLowerCase()){const a=window.localStorage.token;a&&(t.headers["authorization"]=`${a}`)}return t}),(async t=>Promise.reject(t)));const v={async consultar_email(t){try{const a=await p.post("/api/consultaremail",t);return 200==a.status?{status:a.status,data:a.data}:{status:a.status}}catch(a){alert(a)}},async cadastrar_usuario(t){try{const{status:a}=await p.post("/api/cadastrarusuario",t);return a}catch(a){console.log(a)}},async login(t){try{const a=await p.post("/api/login",t);return 200==a.status?{status:a.status,data:a.data}:{status:a.status}}catch(a){console.log(a)}},async criar_contato(t){try{const{status:a}=await p.post("/api/incluir_contato",t);return a}catch(a){console.log(a)}},async atualizar_contato(t,a){try{const{status:e}=await p.put("/api/editar_contato/"+t,a);return e}catch(e){console.log(e)}},async apagar_contato(t){try{const{status:a}=await p.delete("/api/apagar_contato/"+t);return a}catch(a){console.log(a)}},async selecionar_contato(t){try{const a=await p.get("/api/contato/"+t);return 200==a.status?{status:a.status,data:a.data}:{status:a.status}}catch(a){console.log(a)}},async selecionar_todos_contatos(){try{const t=await p.get("/api/lista");return 200==t.status?{status:t.status,data:t.data}:{status:t.status}}catch(t){alert(t)}}};var g={name:"Login",data:()=>({email:"",senha:"",correcao_email:""}),methods:{verifica_email(){/^[a-z0-9.]+@[a-z0-9]+\.[a-z]+(\.[a-z]+)?$/i.test(this.email)||(this.correcao_email="É necessário informar o email do usuário.")},limpar_correcao_email(){this.correcao_email=""},verifica_senha(){this.senha||(this.correcao_senha="É necessário informar a senha do usuário.")},limpar_correcao_senha(){this.correcao_senha=""},validar_form(){var t=!0,a="Foram encontrados alguns erros:\n",e=this.email,o=this.senha;return/^[a-z0-9.]+@[a-z0-9]+\.[a-z]+(\.[a-z]+)?$/i.test(e)||(t=!1,a+="É necessário preencher o email do usuário adequadamente.\n"),o||(t=!1,a+="É necessário preencher a senha do usuário.\n"),t||alert(a),t},async enviar(){if(!this.validar_form())return;const t=await v.login({email:this.email,senha:this.senha});200==t.status?(window.localStorage.logado=!0,window.localStorage.token=t.data.token,this.$router.push("/listacontatos")):alert("Acesso negado!")}}},b=g,y=(0,i.Z)(b,_,h,!1,null,null,null),w=y.exports,C=function(){var t=this,a=t._self._c;return a("div",[a("h2",{staticClass:"subtitle"},[t._v("Relação de contatos")]),a("p",[a("strong",[t._v("Usuário:")]),t._v(" "+t._s(t.nome_usuario))]),a("p",{staticClass:"subtitle"},[a("button",{attrs:{type:"button"},on:{click:function(a){return t.ir_incluir_contato()}}},[t._v("Incluir Contato")])]),a("table",{staticClass:"table is-bordered is-fullwidth"},[t._m(0),a("tbody",t._l(t.contatos,(function(e,o){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.nome))]),a("td",[t._v(t._s(e.telefone))]),a("td",[a("button",{staticClass:"button is-warning",attrs:{type:"button"},on:{click:function(a){return t.modificar_contato(o)}}},[t._v("Modificar")]),t._v("  "),a("button",{staticClass:"button is-warning",attrs:{type:"button"},on:{click:function(a){return t.apagar_contato(o)}}},[t._v("Apagar")])])])})),0)]),a("p",[a("button",{staticClass:"button is-warning",attrs:{type:"button"},on:{click:function(a){return t.sair()}}},[t._v("Sair")])])])},S=[function(){var t=this,a=t._self._c;return a("thead",[a("tr",[a("th",[t._v("Nome")]),a("th",[t._v("Telefone")]),a("th",[t._v("Ação")])])])}],k={name:"ListaContatos",data:()=>({contatos:[],nome_usuario:null}),methods:{ir_incluir_contato(){this.$router.push("/incluircontato/0")},async apagar_contato(t){if(confirm("Apagar mesmo?")){const a=this.contatos[t],e=await v.apagar_contato(a.id);204==e?(this.contatos.splice(t,1),alert("Contato apagado.")):alert("Falha ao apagar contato.")}},modificar_contato(t){this.$store.commit("SET_CONTATO",this.contatos[t]),this.$router.push("/incluircontato/1")},sair(){window.localStorage.logado=!1,window.localStorage.token=null,this.$router.push("/")},async carregar_lista(){const t=await v.selecionar_todos_contatos();200==t.status?(this.nome_usuario=t.data.nome_usuario,this.contatos=t.data.contatos):alert("Falha na carga dos dados!")}},mounted(){this.carregar_lista()}},x=k,$=(0,i.Z)(x,C,S,!1,null,null,null),P=$.exports,z=function(){var t=this,a=t._self._c;return a("div",[a("h2",{staticClass:"subtitle"},[t._v("Cadastro de Usuário")]),a("form",[a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"email"}},[t._v("Email")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"text",id:"email"},domProps:{value:t.email},on:{blur:function(a){return t.verifica_email()},click:function(a){return t.limpar_correcao_email()},input:function(a){a.target.composing||(t.email=a.target.value)}}})]),a("div",{staticStyle:{color:"red"}},[t._v(t._s(t.correcao_email))])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"nome"}},[t._v("Nome")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.nome,expression:"nome"}],attrs:{type:"text",id:"nome"},domProps:{value:t.nome},on:{blur:function(a){return t.verifica_nome()},click:function(a){return t.limpar_correcao_nome()},input:function(a){a.target.composing||(t.nome=a.target.value)}}})]),a("div",{staticStyle:{color:"red"}},[t._v(t._s(t.correcao_nome))])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"senha"}},[t._v("Senha")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.senha,expression:"senha"}],attrs:{type:"password",id:"senha"},domProps:{value:t.senha},on:{blur:function(a){return t.verifica_senha()},click:function(a){return t.limpar_correcao_senha()},input:function(a){a.target.composing||(t.senha=a.target.value)}}})]),a("div",{staticStyle:{color:"red"}},[t._v(t._s(t.correcao_senha))])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label",attrs:{for:"confirmacao_senha"}},[t._v("Confirmação Senha")]),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmacao_senha,expression:"confirmacao_senha"}],attrs:{type:"password",id:"confirmacao_senha"},domProps:{value:t.confirmacao_senha},on:{blur:function(a){return t.verifica_confirmacao_senha()},click:function(a){return t.limpar_correcao_confirmacao_senha()},input:function(a){a.target.composing||(t.confirmacao_senha=a.target.value)}}})]),a("div",{staticStyle:{color:"red"}},[t._v(t._s(t.correcao_confirmacao_senha))])]),a("div",{staticClass:"linha_form"},[a("input",{staticClass:"button is-warning",attrs:{type:"reset",value:"Limpar"}}),t._v("  "),a("input",{staticClass:"button is-warning",attrs:{type:"button",value:"Enviar"},on:{click:function(a){return t.enviar()}}}),a("br"),a("router-link",{attrs:{to:"/"}},[t._v("Voltar para Login")])],1)])])},O=[],N={name:"Cadastro",data:()=>({email:"",correcao_email:"",nome:"",correcao_nome:"",senha:"",correcao_senha:"",confirmacao_senha:"",correcao_confirmacao_senha:"",email_pode_cadastrar:!1}),methods:{async verifica_email(){if(/^[a-z0-9.]+@[a-z0-9]+\.[a-z]+(\.[a-z]+)?$/i.test(this.email)){const t=await v.consultar_email({email:this.email});200==t.status?"false"==t.data.email_jah_cadastrado?(this.correcao_email="Esse email pode ser cadastrado.",this.email_pode_cadastrar=!0):(this.correcao_email="Esse email já foi cadastrado.",this.email_pode_cadastrar=!1):(this.correcao_email="Não é possível verificar o email",this.email_pode_cadastrar=!1)}else this.correcao_email="É necessário informar o email do usuário."},limpar_correcao_email(){this.correcao_email=""},verifica_nome(){String(this.nome).length<3&&(this.correcao_nome="É necessário preencher o nome com pelo menos 3 caracteres alfanuméricos.")},limpar_correcao_nome(){this.correcao_nome=""},verifica_senha(){this.senha||(this.correcao_senha="É necessário informar a senha.")},limpar_correcao_senha(){this.correcao_senha=""},verifica_confirmacao_senha(){this.confirmacao_senha||(this.correcao_confirmacao_senha="É necessário preencher a confirmação da senha.")},limpar_correcao_confirmacao_senha(){this.correcao_confirmacao_senha=""},validar_form(){var t=!0,a="Foram encontrados alguns erros:\n";return/^[a-z0-9.]+@[a-z0-9]+\.[a-z]+(\.[a-z]+)?$/i.test(this.email)||(t=!1,a+="É necessário preencher o email do usuário adequadamente.\n"),String(this.nome).length<3&&(t=!1,a+="É necessário preencher o nome do usuário.\n"),this.senha||(t=!1,a+="É necessário preencher a senha do usuário.\n"),this.confirmacao_senha||(t=!1,a+="É necessário preencher a confirmação da senha do usuário.\n"),this.senha!=this.confirmacao_senha&&(t=!1,a+="A senha e a confirmação da senha não conferem.\n"),t||alert(a),t},async enviar(){if(!this.validar_form())return;const t=await v.cadastrar_usuario({nome:this.nome,email:this.email,confirmacao_senha:this.confirmacao_senha,senha:this.senha});201==t?(alert("Usuário Cadastrado!"),this.$router.push("/")):alert("falha ao cadastrar o usuário")}}},T=N,Z=(0,i.Z)(T,z,O,!1,null,null,null),j=Z.exports,L=function(){var t=this,a=t._self._c;return a("div",[a("h2",[t._v(t._s(t.titulo)+" Contato")]),a("form",[a("div",{staticClass:"linha_form"},[a("label",{attrs:{for:"nome"}},[t._v("Nome")]),t._v("  "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.nome,expression:"nome"}],attrs:{type:"text",id:"nome",maxlength:"255"},domProps:{value:t.nome},on:{blur:function(a){return t.verifica_nome()},click:function(a){return t.limpar_correcao_nome()},input:function(a){a.target.composing||(t.nome=a.target.value)}}}),a("div",{staticStyle:{color:"red"}},[t._v(t._s(t.correcao_nome))])]),a("div",{staticClass:"linha_form"},[a("label",{attrs:{for:"telefone"}},[t._v("Telefone")]),t._v("  "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.telefone,expression:"telefone"}],attrs:{type:"text",id:"telefone"},domProps:{value:t.telefone},on:{blur:function(a){return t.verifica_telefone()},focus:function(a){return t.desformata_telefone()},click:function(a){return t.limpar_correcao_telefone()},input:function(a){a.target.composing||(t.telefone=a.target.value)}}}),a("div",{staticStyle:{color:"red"}},[t._v(t._s(t.correcao_telefone))])]),a("div",{staticClass:"linha_form"},[a("input",{attrs:{type:"reset",value:"Limpar"}}),a("input",{attrs:{type:"button",value:"Gravar Contato"},on:{click:function(a){return t.gravar()}}})]),a("router-link",{attrs:{to:"/listacontatos"}},[t._v("Voltar")])],1)])},A=[],E={name:"IncluirContato",data:()=>({correcao_nome:"",correcao_telefone:"",nome:"",telefone:"",id:null,id_usuario:null}),props:["tipo_form"],computed:{titulo(){return 0==this.tipo_form?"Incluir":"Alterar"},contato_alterar(){return this.$store.state.contato}},methods:{verifica_nome(){String(this.nome).length<3&&(this.correcao_nome="É necessário incluir o nome do contato com pelo menos 3 letras")},limpar_correcao_nome(){this.correcao_nome=""},verifica_telefone(){this.formata_telefone(),/[0-9]{2}\s[0-9]{4,5}\-[0-9]{4}/g.test(this.telefone)||(this.correcao_telefone="É necessário incluir o telefone do contato com ddd + 8 ou 9 dígitos")},desformata_telefone(){this.telefone=String(this.telefone).replace(/(\s|\-)/g,"")},limpar_correcao_telefone(){this.correcao_telefone=""},formata_telefone(){/^[0-9]{10}$/.test(this.telefone)?this.telefone=String(this.telefone).replace(/([0-9]{2})([0-9]{4})([0-9]{4})/g,"$1 $2-$3"):/^[0-9]{11}$/.test(this.telefone)&&(this.telefone=String(this.telefone).replace(/([0-9]{2})([0-9]{5})([0-9]{4})/g,"$1 $2-$3"))},validar_form(){var t=!0,a="Foram encontrados alguns erros:\n",e=this.nome,o=this.telefone.replace(/(\s|\-)/g,"");return e.length<3&&(t=!1,a+="É necessário preencher o nome com pelo menos 3 letras.\n"),/[0-9]{10,11}/.test(o)||(t=!1,a+="É necessário preencher o telefone com ddd + 9 ou 10 dígitos.\n"),t||alert(a),t},async gravar(){if(this.validar_form())if(1==this.tipo_form){const t=await v.atualizar_contato(this.id,{nome:this.nome,telefone:this.telefone,id:this.id,id_usuario:this.id_usuario});200==t&&(alert("Dados gravados"),this.$router.push("/listacontatos"))}else{const t=await v.criar_contato({nome:this.nome,telefone:this.telefone});201==t&&(alert("Dados gravados"),this.$router.push("/listacontatos"))}}},mounted(){1==this.tipo_form&&(this.nome=this.contato_alterar.nome,this.telefone=this.contato_alterar.telefone,this.id=this.contato_alterar.id,this.id_usuario=this.contato_alterar.id_usuario)}},F=E,I=(0,i.Z)(F,L,A,!1,null,null,null),M=I.exports;o.ZP.use(u.ZP);const U=[{path:"/",name:"Login",component:w,props:!1},{path:"/listacontatos",name:"ListaContatos",component:P,props:!1},{path:"/cadastro",name:"Cadastro",component:j,props:!1},{path:"/incluircontato/:tipo_form/:id_contato?",name:"IncluirContato",component:M,props:!0}],q=new u.ZP({routes:U});var D=q;o.ZP.config.productionTip=!1,new o.ZP({router:D,store:d,render:t=>t(l)}).$mount("#app")}},a={};function e(o){var r=a[o];if(void 0!==r)return r.exports;var n=a[o]={exports:{}};return t[o].call(n.exports,n,n.exports,e),n.exports}e.m=t,function(){var t=[];e.O=function(a,o,r,n){if(!o){var i=1/0;for(u=0;u<t.length;u++){o=t[u][0],r=t[u][1],n=t[u][2];for(var s=!0,c=0;c<o.length;c++)(!1&n||i>=n)&&Object.keys(e.O).every((function(t){return e.O[t](o[c])}))?o.splice(c--,1):(s=!1,n<i&&(i=n));if(s){t.splice(u--,1);var l=r();void 0!==l&&(a=l)}}return a}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[o,r,n]}}(),function(){e.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(a,{a:a}),a}}(),function(){e.d=function(t,a){for(var o in a)e.o(a,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:a[o]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)}}(),function(){e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};e.O.j=function(a){return 0===t[a]};var a=function(a,o){var r,n,i=o[0],s=o[1],c=o[2],l=0;if(i.some((function(a){return 0!==t[a]}))){for(r in s)e.o(s,r)&&(e.m[r]=s[r]);if(c)var u=c(e)}for(a&&a(o);l<i.length;l++)n=i[l],e.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return e.O(u)},o=self["webpackChunkagenda_telefonica_vue"]=self["webpackChunkagenda_telefonica_vue"]||[];o.forEach(a.bind(null,0)),o.push=a.bind(null,o.push.bind(o))}();var o=e.O(void 0,[998],(function(){return e(3482)}));o=e.O(o)})();
//# sourceMappingURL=app.e3b9400d.js.map